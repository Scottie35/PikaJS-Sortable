/** 
 *	@license PikaJS Sortable plugin 1.0.1
 *	Â© 2022-2025 Scott Ogrin
 * 	MIT License
 */
!function(t){function e(e,r,a){var i='<div class="droptarget"></div>',o={width:t.sortable.active.width+"px",height:t.sortable.active.height+"px",margin:t.sortable.active.margin,display:t.sortable.active.display};"inline-block"==o.display&&(o["vertical-align"]="bottom"),t.sortable.active.containers.each(function(){this.find(".droptarget").each(function(){this.remove()})}),"before"==e?a.before(i):"after"==e?a.after(i):r.append(i),r.find(".droptarget").css(o)}t.sortable={Version:"1.0",defaults:{direction:"vertical",on_dragstart:null,on_dragend:null,on_dragenter:null,on_dragover:null,on_dragleave:null,on_drop:null},active:{}},t.extend(t.fn,{sortable:function(r,a){var i=t.R(),o=this,n=this.find(r);a??={},a.direction??=t.sortable.defaults.direction,a.on_dragstart??=t.sortable.defaults.on_dragstart,a.on_dragend??=t.sortable.defaults.on_dragend,a.on_dragenter??=t.sortable.defaults.on_dragenter,a.on_dragover??=t.sortable.defaults.on_dragover,a.on_dragleave??=t.sortable.defaults.on_dragleave,a.on_drop??=t.sortable.defaults.on_drop,0!=o.length&&0!=n.length&&(o.each(function(){this.data("sortid",i)}),n.each(function(){this.attr("draggable","true")}),n.on("dragstart",function(e){t.sortable.active={id:i,containers:o,dragexpr:r,direction:a.direction,timer:null,position:{x:0,y:0},target:t(e.currentTarget),width:t(e.currentTarget).width()-6,height:t(e.currentTarget).height()-6,margin:t(e.currentTarget).css("margin"),display:t(e.currentTarget).css("display")},t(this).addClass("dragging"),t.t(a.on_dragstart,"f")&&a.on_dragstart.call(this,e)}),n.on("dragend",function(e){t(this).removeClass("dragging"),t(".droptarget").each(function(){this.remove()}),t.t(a.on_dragend,"f")&&a.on_dragend.call(this,e)}),o.on("dragenter",function(e){t.t(a.on_dragenter,"f")&&a.on_dragenter.call(this,e)}),o.on("dragover",function(o){var n=t(this);if(n.data("sortid")!=i||i!=t.sortable.active.id)return!0;if(t.S(o),null==t.sortable.active.timer){var s=o.pageX,d=o.pageY,l=t(o.target),g="H";if(Math.abs(d-t.sortable.active.position.y)>Math.abs(s-t.sortable.active.position.x)&&(g="V"),t.sortable.active.position.x=s,t.sortable.active.position.y=d,l.length>0&&!l.hasClass("droptarget")){var c=!1;if(n.find(r).each(function(){var t=this.position(),i=this.width(),o=this.height(),l=this.next(r);if("vertical"==a.direction){if(d<t.top+o/2)return e("before",n,this),c=!0,!1;if(l.length>0&&d>t.top+o/2&&d<l.position().top+l.height()/2)return e("after",n,this),c=!0,!1}else if("horizontal"==a.direction){if(s<t.left+i/2)return e("before",n,this),c=!0,!1;if(l.length>0&&s>t.left+i/2&&s<l.position().left+l.width()/2)return e("after",n,this),c=!0,!1}else if("grid"==a.direction&&s>t.left&&s<t.left+i&&d>t.top&&d<t.top+o)return"H"==g&&s<t.left+i/2||"V"==g&&d<t.top+o/2?e("after",n,this):e("before",n,this),c=!0,!1}),!c&&"grid"!=a.direction)return e("last",n),!1}t.t(a.on_dragover,"f")&&a.on_dragover.call(this,o),t.sortable.active.timer=setTimeout(function(){t.sortable.active.timer=null},10)}return!1}),o.on("dragleave",function(e){t.t(a.on_dragleave,"f")&&a.on_dragleave.call(this,e)}),o.on("drop",function(e){t.S(e),"grid"==t.sortable.active.direction&&t(".droptarget").next(t.sortable.active.dragexpr).length>0?(t(".droptarget").next(t.sortable.active.dragexpr).before(t.sortable.active.target),t(".droptarget").remove()):t(".droptarget").replace(t.sortable.active.target),t.t(a.on_drop,"f")&&a.on_drop.call(this,e)}))},removeSortable:function(e){var r=t(e);0!=this.length&&0!=r.length&&(r.each(function(){this.removeAttr("draggable")}),this.each(function(){this.removeData("sortid")}),r.off("dragstart"),r.off("dragend"),this.off("dragenter"),this.off("dragover"),this.off("dragleave"),this.off("drop"))}})}(Pika);
